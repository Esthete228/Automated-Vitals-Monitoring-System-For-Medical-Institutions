<!DOCTYPE html>
<html>
<head>
  <title>Monitor Patient</title>
  <link rel="stylesheet" href="../static/style.css">
</head>
<body>


<div class="top-bar">
  <div class="bar-theme top-bar top-bar-large">
    <a href="/home" class="bar-item theme-l1">
      <button class="button theme">Go Back to Starter Page</button>
    </a>
  </div>
</div>

<h1>Select Patient for Monitoring</h1>

<label for=patientSelect>Select Patient:</label>
<select id="patientSelect">
  <option value="">Select a patient</option>
</select>

<br><br>
<button id="startMonitoringBtn">Start Monitoring</button>
<br><br>

<script>
  const select = document.getElementById("patientSelect");
  const startMonitoringBtn = document.getElementById("startMonitoringBtn");

  // Event listener for the Start Monitoring button
  startMonitoringBtn.addEventListener("click", () => {
    const selectedPatientId = select.value;
    if (selectedPatientId) {
      redirectToMonitor(selectedPatientId);
    } else {
      alert("Please select a patient.");
    }
  });

  // Fetch the list of patients and populate the dropdown
  fetch('/fetchPatients')
          .then(response => response.json())
          .then(data => {
            data.forEach(patient => {
              const option = document.createElement("option");
              option.value = patient.id;
              option.text = `${patient.firstName} ${patient.lastName}`;
              select.appendChild(option);
            });
          })
          .catch(error => {
            console.error('Error fetching patients:', error);
          });

  function redirectToMonitor(patientId) {
    window.location.href = `/monitorPatient?id=${patientId}`;
  }
</script>
</body>
</html>
